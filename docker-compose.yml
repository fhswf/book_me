version: "3" 

services:
  bookme:
    container_name: bookme
    image: bookme:latest
    restart: always
    build: .
    env_file:
      - docker.env
    ports:
      - "127.0.0.1:47001:5000"
    links:
      - mongo-bookme
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.bookme.rule=PathPrefix(`/bookme`)"
      - "traefik.http.routers.bookme.entrypoints=web,websecure"
      

  mongo-bookme:
    container_name: mongo-bookme
    image: mongo
    volumes:
      - /opt/bookme/mongo:/data/db

networks:
  default:
    external:
      name: traefik
